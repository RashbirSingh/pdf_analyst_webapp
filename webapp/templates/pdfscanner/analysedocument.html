<!DOCTYPE html>
{% extends "pdfscanner/base.html" %}
{% load filename %}
{% load filesize %}
{% load filetime %}
{% load filepagecount %}
{% load settingsname %}

{% block body_block %}
<div class="jumbotron">
  <div id="mySidenav" class="sidenav">
      <a href="#" class="openbtn" onclick="openNavAnalyseDocument()" style="font-size:20px;
                                                                            padding-left:45px;
                                                                            background-color: #a5a8b4;
                                                                            top: 120px;">
        <img class="zoom"  src="/static/icons/gear.png" style="width:48px;height:48px;">
      </a>


  </div>

  <form method="POST" enctype="multipart/form-data">
    {% if documents.count == 0 %}
    <p> please add some pdf to analyse </p>
      <a class="btn btn-primary btn-lg" href="uploaddocument.html" role="button">Upload PDF</a>
    {% else %}

    <h1 style="text-align: center;" >List of PDF(s) Available for analysis</h1>

<div id="mySidenav" class="sidenav">
    <a href="#" class="openbtn" style="font-size:20px;
                                       padding-left:45px;
                                       top: 200px;
                                       background-color: #A8B4A5;">
    <button type="submit" style=" background: none;
	                              color: inherit;
                                  border: none;
	                              padding: 0;
	                              font: inherit;
	                              cursor: pointer;
	                              outline: inherit;
                                  width:auto">
      <img class = "zoom" src="/static/icons/analysis.png" style="width:48px;height:48px;">
    </button>
    </a>
  </div>

    <table class="table table-striped table-hover table-bordered" id="example" style="font-size:12px; width:100%;">
      <thead class="thead-dark">
      <tr>
        <th scope="col" width="10%">File Name</th>
        <th scope="col" style="text-align:center;" width="10%">Size</th>
        <th scope="col" style="text-align:center;"width="10%">Pages</th>
        <th scope="col" style="text-align:center;" width="44%">Date Added</th>
        <th scope="col" style="text-align:center;" width="10%">Select</th>
        <th scope="col" style="text-align:center;" width="10%">Delete</th>
        <th scope="col" style="text-align:center;" width="6%">Downlod Metadata</th>
      </tr>
      </thead>
      {% for document in documents %}
      <form class="" action="index.html" method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        <tr>

          <td><b style='text-transform: capitalize;' width="5%"> {{ document.file_field|filename }}</b></td>
          <td style="text-align:center;" width="10%">{{ document.file_field|filesize }} kB</td>
          <td style="text-align:center;" width="10%">{{ document.file_field|filepagecount }}</td>
          <td style="text-align:center;" width="55%">{{ document.file_field|filetime }}</td>
          <td style="text-align:center;" width="10%"><input type="checkbox" name="doc" value={{document.file_field.url}}></td></input>
          <td style="text-align:center;" width="10%">
            <a class = "zoom" href="{% url 'deletedocument' document.pk %}">&#10060;</a>
          </td>
          <td style="text-align:center;">
            <a class = "zoom" href="#">
              <img class = "zoom" src="/static/icons/downloadfile.png" style="width:22px;height:22px;">
            </a>
          </td>
          {% endfor %}
        </tr>
  </table>

    <div id="mySidebar" class="sidebar">
      <a href="javascript:void(0)" class="closebtn" style="padding-top: 80px;" onclick="closeNav()">&#9747;</a>

      <div style="padding-top: 80px;">
<!--        <button type="submit" class="btn btn-outline-primary" name = "load_settings"-->
<!--                                                           style="text-align: center;-->
<!--                                                           margin-bottom:10px;-->
<!--                                                           margin-left:5px;-->
<!--                                                           margin-right:5px;-->
<!--                                                           width: 99%;">Load Settings</button>-->

      </div>

      <div>
              <a href="#" style="text-align: center;
                margin-bottom:10px;
                margin-left:5px;
                margin-right:5px;
                width: 99%;">
        <b>*</b> The uploaded file will override all the selected settings
      </a>

          <button type="submit" class="btn btn-outline-primary"  name = "view_settings"
                                                           style="text-align: center;
                                                           height: 8.5%;
                                                           width: 16.5%;
                                                           right: 3px;
                                                           position: absolute;">View Settings</button>

        <select name="usersettings" id="usersettings"
                style="width: 82%;
                text-align: center;
                margin-bottom:10px;
                margin-left:5px;
                margin-right:5px">
          <option disabled selected value> -- Select from saved settings -- </option>
          {% for settings in user_settings %}
          <option value="{{ settings.setting_field }} ">{{ settings.setting_field|settingsname }} </option>
          {% endfor %}
        </select>

        <div class="custom-file" style="text-align: center;
                                        margin-bottom:10px;
                                        margin-left:5px;
                                        margin-right:5px;
                                        width: 82%;">
          <label class="custom-file-label" for="customFile">Upload Custom settings JSON</label>
          <input type="file" name="user_settings" class="custom-file-input" id="customFile">
        </div>
    </div>
  </form>


  {% endif %}
</div>
{% endblock %}
